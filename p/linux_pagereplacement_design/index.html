<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="åœ¨ Linux Kernel 2.6.28 åˆä½µäº† Split LRU çš„æ©Ÿåˆ¶ï¼Œä¸¦åœ¨å¾ŒçºŒç‰ˆæœ¬ä¸­æŒçºŒæ”¹é€²ä»¥åŠä¿®å¾©ï¼Œç›´åˆ° 2.6.32 æ€§èƒ½æ‰è®Šå¾—ç©©å®šã€‚è€Œå°æ–¼ tracking of recently reclaimed pages é‚„æ²’è¢«æ•´åˆï¼Œè€Œæ˜¯é€šéå¯¦ä½œä¸€ç¨®æ–¹æ³•ä¾†å‹•æ…‹èª¿æ•´ LRU list çš„å¤§å°ã€‚\nLRUï¼Œç‚ºæœ€å¸¸è¦‹çš„ page replacement æ©Ÿåˆ¶ï¼Œåœ¨å‚³çµ±å¯¦ç¾ä¸­æœƒå°‡ user space çš„ page å’Œ kernel space çš„ page éƒ½æ”¾åœ¨åŒä¸€å€‹ LRU list ä¸­ã€‚é€™å€‹åšæ³•åœ¨éƒ¨åˆ†æƒ…æ³ä¸‹æœƒå°è‡´éæœ€ä½³åŒ–çš„ page replacement ç™¼ç”Ÿï¼Œç‰¹åˆ¥æ˜¯ç•¶ user space çš„ç¨‹å¼å’Œ kernel space çˆ­æ¶è¨˜æ†¶é«”æ™‚æœƒå½±éŸ¿åˆ°æ€§èƒ½ã€‚\n2.6.27 ä¹‹å‰ page replacement å•é¡Œ åœ¨ 2.6.27 æ›´æ—©ç‰ˆæœ¬çš„ page replacement å­˜åœ¨å…©å¤§ä¸»è¦å•é¡Œï¼Œé€™äº›å•é¡Œåœ¨å¤§å‹è¨˜æ†¶é«”ç³»çµ±ï¼Œå¦‚æ•¸ 10 GB ç”šè‡³æ–¼ä¸Š 100 GB çš„ç³»çµ±ä¸­å°¤å…¶åš´é‡ã€‚\nkernel é©…é€çš„ page ä¸¦éæœ€ä½³çš„ page ç”šè‡³æ–¼ä¸è©²é©…é€çš„ pageï¼Œå°è‡´æ€§èƒ½ä¸‹é™ kernel åœ¨å›æ”¶è¨˜æ†¶é«”æ™‚ï¼Œå¯èƒ½æœƒé©…é€é‚£äº›ä¸è©²å›æ”¶çš„ pageï¼Œè€Œä¿ç•™æ‡‰è©²è¢«é©…é€çš„ page é€™æœƒå°è‡´ cache thrashing çš„å•é¡Œï¼Œå› ç‚ºæ‡‰ç”¨ç¨‹å¼å¯èƒ½æœƒé »ç¹é‡æ–°è¼‰å…¥è¢«éŒ¯èª¤å›æ”¶çš„ page çœŸæ­£è¦è¢«å›æ”¶çš„ page cache å¯èƒ½æœƒè¢«éš±è—åœ¨å¤§é‡ [[anon memory]] æˆ–æ˜¯ anon page å¾Œé¢ Linux ä½¿ç”¨ LRU list ç®¡ç†è¨˜æ†¶é«”ï¼Œä½† list æ²’æœ‰å€åˆ† anon page ä»¥åŠ page cache ( ç”¨æ–¼ç¡¬ç¢Ÿ I/O çš„ page ) åœ¨æ²’æœ‰ Split LRU ä¹‹å‰ï¼Œé€™äº› page è¢«çµ±ä¸€æ”¾åœ¨ LRU list ä¸­ï¼Œå°è‡´ kernel åœ¨å°‹æ‰¾å¯é‡‹æ”¾çš„ pageï¼Œå¯èƒ½æœƒå„ªå…ˆå›æ”¶æœ€å®¹æ˜“æ‰¾åˆ°çš„ pageï¼Œè€Œéæœ€æ‡‰è©²è¢«å›æ”¶çš„ page kernel æœƒæƒæåˆ°ä¸æ‡‰è©²è¢«å›æ”¶çš„ pageï¼Œå°è‡´ CPU è² è¼‰éé«˜ åœ¨å¤§å‹è¨˜æ†¶ç³»ç³»çµ±ä¸­ï¼Œä½æ•ˆçš„ LRU æƒæåªæœƒå¢åŠ  CPU ä½¿ç”¨ç‡ ä½†åœ¨è¶…å¤§å‹è¨˜æ†¶é«”ç³»çµ±ä¸­ï¼Œé€™ç¨®æƒæä¸ä½†æœƒå°è‡´ CPU è² è¼‰å·¨å¹…å¢åŠ ï¼Œç”šè‡³å‡ºç¾åš´é‡çš„é–ç«¶çˆ­å•é¡Œï¼Œå½±éŸ¿ç³»çµ±æ•ˆèƒ½ kernel ä¸æ–·é‡è¤‡æƒæ LRU listï¼Œå…¶ä¸­è¨±å¤šçš„ page æ ¹æœ¬ä¸æ‡‰è©²å›æ”¶ ä¸åƒ…æµªè²» CPU è³‡æºï¼Œé‚„å¯èƒ½å°è‡´è¨˜æ†¶é«”ç®¡ç†çš„ lock ç«¶çˆ­ï¼Œæ‹–å®ç³»çµ± ä¾‹å¦‚åœ¨ä¸€å€‹æœ‰ 80GB anon page å’Œ 10GB page cacheï¼Œæ²’æœ‰ swap çš„ç³»çµ±ä¸­ï¼Œåœ¨èˆŠçš„ LRU è¨­è¨ˆä¸­\n"><title>Linux_PageReplacement_Design</title><link rel=canonical href=https://wuta0209.github.io/p/linux_pagereplacement_design/><link rel=stylesheet href=/scss/style.min.42217344d95b2e9acb3b1742221f20a0f48c9e795b4199208d577294e9b89e09.css><meta property='og:title' content="Linux_PageReplacement_Design"><meta property='og:description' content="åœ¨ Linux Kernel 2.6.28 åˆä½µäº† Split LRU çš„æ©Ÿåˆ¶ï¼Œä¸¦åœ¨å¾ŒçºŒç‰ˆæœ¬ä¸­æŒçºŒæ”¹é€²ä»¥åŠä¿®å¾©ï¼Œç›´åˆ° 2.6.32 æ€§èƒ½æ‰è®Šå¾—ç©©å®šã€‚è€Œå°æ–¼ tracking of recently reclaimed pages é‚„æ²’è¢«æ•´åˆï¼Œè€Œæ˜¯é€šéå¯¦ä½œä¸€ç¨®æ–¹æ³•ä¾†å‹•æ…‹èª¿æ•´ LRU list çš„å¤§å°ã€‚\nLRUï¼Œç‚ºæœ€å¸¸è¦‹çš„ page replacement æ©Ÿåˆ¶ï¼Œåœ¨å‚³çµ±å¯¦ç¾ä¸­æœƒå°‡ user space çš„ page å’Œ kernel space çš„ page éƒ½æ”¾åœ¨åŒä¸€å€‹ LRU list ä¸­ã€‚é€™å€‹åšæ³•åœ¨éƒ¨åˆ†æƒ…æ³ä¸‹æœƒå°è‡´éæœ€ä½³åŒ–çš„ page replacement ç™¼ç”Ÿï¼Œç‰¹åˆ¥æ˜¯ç•¶ user space çš„ç¨‹å¼å’Œ kernel space çˆ­æ¶è¨˜æ†¶é«”æ™‚æœƒå½±éŸ¿åˆ°æ€§èƒ½ã€‚\n2.6.27 ä¹‹å‰ page replacement å•é¡Œ åœ¨ 2.6.27 æ›´æ—©ç‰ˆæœ¬çš„ page replacement å­˜åœ¨å…©å¤§ä¸»è¦å•é¡Œï¼Œé€™äº›å•é¡Œåœ¨å¤§å‹è¨˜æ†¶é«”ç³»çµ±ï¼Œå¦‚æ•¸ 10 GB ç”šè‡³æ–¼ä¸Š 100 GB çš„ç³»çµ±ä¸­å°¤å…¶åš´é‡ã€‚\nkernel é©…é€çš„ page ä¸¦éæœ€ä½³çš„ page ç”šè‡³æ–¼ä¸è©²é©…é€çš„ pageï¼Œå°è‡´æ€§èƒ½ä¸‹é™ kernel åœ¨å›æ”¶è¨˜æ†¶é«”æ™‚ï¼Œå¯èƒ½æœƒé©…é€é‚£äº›ä¸è©²å›æ”¶çš„ pageï¼Œè€Œä¿ç•™æ‡‰è©²è¢«é©…é€çš„ page é€™æœƒå°è‡´ cache thrashing çš„å•é¡Œï¼Œå› ç‚ºæ‡‰ç”¨ç¨‹å¼å¯èƒ½æœƒé »ç¹é‡æ–°è¼‰å…¥è¢«éŒ¯èª¤å›æ”¶çš„ page çœŸæ­£è¦è¢«å›æ”¶çš„ page cache å¯èƒ½æœƒè¢«éš±è—åœ¨å¤§é‡ [[anon memory]] æˆ–æ˜¯ anon page å¾Œé¢ Linux ä½¿ç”¨ LRU list ç®¡ç†è¨˜æ†¶é«”ï¼Œä½† list æ²’æœ‰å€åˆ† anon page ä»¥åŠ page cache ( ç”¨æ–¼ç¡¬ç¢Ÿ I/O çš„ page ) åœ¨æ²’æœ‰ Split LRU ä¹‹å‰ï¼Œé€™äº› page è¢«çµ±ä¸€æ”¾åœ¨ LRU list ä¸­ï¼Œå°è‡´ kernel åœ¨å°‹æ‰¾å¯é‡‹æ”¾çš„ pageï¼Œå¯èƒ½æœƒå„ªå…ˆå›æ”¶æœ€å®¹æ˜“æ‰¾åˆ°çš„ pageï¼Œè€Œéæœ€æ‡‰è©²è¢«å›æ”¶çš„ page kernel æœƒæƒæåˆ°ä¸æ‡‰è©²è¢«å›æ”¶çš„ pageï¼Œå°è‡´ CPU è² è¼‰éé«˜ åœ¨å¤§å‹è¨˜æ†¶ç³»ç³»çµ±ä¸­ï¼Œä½æ•ˆçš„ LRU æƒæåªæœƒå¢åŠ  CPU ä½¿ç”¨ç‡ ä½†åœ¨è¶…å¤§å‹è¨˜æ†¶é«”ç³»çµ±ä¸­ï¼Œé€™ç¨®æƒæä¸ä½†æœƒå°è‡´ CPU è² è¼‰å·¨å¹…å¢åŠ ï¼Œç”šè‡³å‡ºç¾åš´é‡çš„é–ç«¶çˆ­å•é¡Œï¼Œå½±éŸ¿ç³»çµ±æ•ˆèƒ½ kernel ä¸æ–·é‡è¤‡æƒæ LRU listï¼Œå…¶ä¸­è¨±å¤šçš„ page æ ¹æœ¬ä¸æ‡‰è©²å›æ”¶ ä¸åƒ…æµªè²» CPU è³‡æºï¼Œé‚„å¯èƒ½å°è‡´è¨˜æ†¶é«”ç®¡ç†çš„ lock ç«¶çˆ­ï¼Œæ‹–å®ç³»çµ± ä¾‹å¦‚åœ¨ä¸€å€‹æœ‰ 80GB anon page å’Œ 10GB page cacheï¼Œæ²’æœ‰ swap çš„ç³»çµ±ä¸­ï¼Œåœ¨èˆŠçš„ LRU è¨­è¨ˆä¸­\n"><meta property='og:url' content='https://wuta0209.github.io/p/linux_pagereplacement_design/'><meta property='og:site_name' content='WuTa Blog'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Linux Kernel'><meta property='article:tag' content='Linux Kernel MM'><meta property='article:published_time' content='2025-09-02T11:51:13+08:00'><meta property='article:modified_time' content='2025-09-02T11:51:13+08:00'><meta name=twitter:title content="Linux_PageReplacement_Design"><meta name=twitter:description content="åœ¨ Linux Kernel 2.6.28 åˆä½µäº† Split LRU çš„æ©Ÿåˆ¶ï¼Œä¸¦åœ¨å¾ŒçºŒç‰ˆæœ¬ä¸­æŒçºŒæ”¹é€²ä»¥åŠä¿®å¾©ï¼Œç›´åˆ° 2.6.32 æ€§èƒ½æ‰è®Šå¾—ç©©å®šã€‚è€Œå°æ–¼ tracking of recently reclaimed pages é‚„æ²’è¢«æ•´åˆï¼Œè€Œæ˜¯é€šéå¯¦ä½œä¸€ç¨®æ–¹æ³•ä¾†å‹•æ…‹èª¿æ•´ LRU list çš„å¤§å°ã€‚\nLRUï¼Œç‚ºæœ€å¸¸è¦‹çš„ page replacement æ©Ÿåˆ¶ï¼Œåœ¨å‚³çµ±å¯¦ç¾ä¸­æœƒå°‡ user space çš„ page å’Œ kernel space çš„ page éƒ½æ”¾åœ¨åŒä¸€å€‹ LRU list ä¸­ã€‚é€™å€‹åšæ³•åœ¨éƒ¨åˆ†æƒ…æ³ä¸‹æœƒå°è‡´éæœ€ä½³åŒ–çš„ page replacement ç™¼ç”Ÿï¼Œç‰¹åˆ¥æ˜¯ç•¶ user space çš„ç¨‹å¼å’Œ kernel space çˆ­æ¶è¨˜æ†¶é«”æ™‚æœƒå½±éŸ¿åˆ°æ€§èƒ½ã€‚\n2.6.27 ä¹‹å‰ page replacement å•é¡Œ åœ¨ 2.6.27 æ›´æ—©ç‰ˆæœ¬çš„ page replacement å­˜åœ¨å…©å¤§ä¸»è¦å•é¡Œï¼Œé€™äº›å•é¡Œåœ¨å¤§å‹è¨˜æ†¶é«”ç³»çµ±ï¼Œå¦‚æ•¸ 10 GB ç”šè‡³æ–¼ä¸Š 100 GB çš„ç³»çµ±ä¸­å°¤å…¶åš´é‡ã€‚\nkernel é©…é€çš„ page ä¸¦éæœ€ä½³çš„ page ç”šè‡³æ–¼ä¸è©²é©…é€çš„ pageï¼Œå°è‡´æ€§èƒ½ä¸‹é™ kernel åœ¨å›æ”¶è¨˜æ†¶é«”æ™‚ï¼Œå¯èƒ½æœƒé©…é€é‚£äº›ä¸è©²å›æ”¶çš„ pageï¼Œè€Œä¿ç•™æ‡‰è©²è¢«é©…é€çš„ page é€™æœƒå°è‡´ cache thrashing çš„å•é¡Œï¼Œå› ç‚ºæ‡‰ç”¨ç¨‹å¼å¯èƒ½æœƒé »ç¹é‡æ–°è¼‰å…¥è¢«éŒ¯èª¤å›æ”¶çš„ page çœŸæ­£è¦è¢«å›æ”¶çš„ page cache å¯èƒ½æœƒè¢«éš±è—åœ¨å¤§é‡ [[anon memory]] æˆ–æ˜¯ anon page å¾Œé¢ Linux ä½¿ç”¨ LRU list ç®¡ç†è¨˜æ†¶é«”ï¼Œä½† list æ²’æœ‰å€åˆ† anon page ä»¥åŠ page cache ( ç”¨æ–¼ç¡¬ç¢Ÿ I/O çš„ page ) åœ¨æ²’æœ‰ Split LRU ä¹‹å‰ï¼Œé€™äº› page è¢«çµ±ä¸€æ”¾åœ¨ LRU list ä¸­ï¼Œå°è‡´ kernel åœ¨å°‹æ‰¾å¯é‡‹æ”¾çš„ pageï¼Œå¯èƒ½æœƒå„ªå…ˆå›æ”¶æœ€å®¹æ˜“æ‰¾åˆ°çš„ pageï¼Œè€Œéæœ€æ‡‰è©²è¢«å›æ”¶çš„ page kernel æœƒæƒæåˆ°ä¸æ‡‰è©²è¢«å›æ”¶çš„ pageï¼Œå°è‡´ CPU è² è¼‰éé«˜ åœ¨å¤§å‹è¨˜æ†¶ç³»ç³»çµ±ä¸­ï¼Œä½æ•ˆçš„ LRU æƒæåªæœƒå¢åŠ  CPU ä½¿ç”¨ç‡ ä½†åœ¨è¶…å¤§å‹è¨˜æ†¶é«”ç³»çµ±ä¸­ï¼Œé€™ç¨®æƒæä¸ä½†æœƒå°è‡´ CPU è² è¼‰å·¨å¹…å¢åŠ ï¼Œç”šè‡³å‡ºç¾åš´é‡çš„é–ç«¶çˆ­å•é¡Œï¼Œå½±éŸ¿ç³»çµ±æ•ˆèƒ½ kernel ä¸æ–·é‡è¤‡æƒæ LRU listï¼Œå…¶ä¸­è¨±å¤šçš„ page æ ¹æœ¬ä¸æ‡‰è©²å›æ”¶ ä¸åƒ…æµªè²» CPU è³‡æºï¼Œé‚„å¯èƒ½å°è‡´è¨˜æ†¶é«”ç®¡ç†çš„ lock ç«¶çˆ­ï¼Œæ‹–å®ç³»çµ± ä¾‹å¦‚åœ¨ä¸€å€‹æœ‰ 80GB anon page å’Œ 10GB page cacheï¼Œæ²’æœ‰ swap çš„ç³»çµ±ä¸­ï¼Œåœ¨èˆŠçš„ LRU è¨­è¨ˆä¸­\n"><link rel="shortcut icon" href=/favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ›é¸å–®>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_1c6ae99766100603.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=site-name><a href=/>WuTa Blog</a></h1><h2 class=site-description>The best learning is trying to teach.</h2></div></header><ol class=menu-social><li><a href=https://github.com/WuTa0209 target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://ithelp.ithome.com.tw/users/20138181 target=_blank title=ITHome rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>AboutMe</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>å¤œæ™šæ¨¡å¼</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®éŒ„</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#2627-ä¹‹å‰-page-replacement-å•é¡Œ>2.6.27 ä¹‹å‰ page replacement å•é¡Œ</a></li><li><a href=#high-level-overview>High-Level Overview</a><ol><li><a href=#æ ¸å¿ƒè¨­è¨ˆæ¦‚å¿µ>æ ¸å¿ƒè¨­è¨ˆæ¦‚å¿µ</a></li></ol></li><li><a href=#file-cache>File Cache</a></li><li><a href=#anonymous-memory>Anonymous Memory</a></li><li><a href=#non-reclaimable>Non reclaimable</a><ol><li><a href=#recently-evicted-nonresident>Recently Evicted/ Nonresident</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/linux-kernel/>Linux Kernel</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/linux_pagereplacement_design/>Linux_PageReplacement_Design</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Sep 02, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>é–±è®€æ™‚é–“: 3 åˆ†é˜</time></div></footer></div></header><section class=article-content><p>åœ¨ Linux Kernel 2.6.28 åˆä½µäº† Split LRU çš„æ©Ÿåˆ¶ï¼Œä¸¦åœ¨å¾ŒçºŒç‰ˆæœ¬ä¸­æŒçºŒæ”¹é€²ä»¥åŠä¿®å¾©ï¼Œç›´åˆ° 2.6.32 æ€§èƒ½æ‰è®Šå¾—ç©©å®šã€‚è€Œå°æ–¼ tracking of recently reclaimed pages é‚„æ²’è¢«æ•´åˆï¼Œè€Œæ˜¯é€šéå¯¦ä½œä¸€ç¨®æ–¹æ³•ä¾†å‹•æ…‹èª¿æ•´ LRU list çš„å¤§å°ã€‚</p><p>LRUï¼Œç‚ºæœ€å¸¸è¦‹çš„ page replacement æ©Ÿåˆ¶ï¼Œåœ¨å‚³çµ±å¯¦ç¾ä¸­æœƒå°‡ user space çš„ page å’Œ kernel space çš„ page éƒ½æ”¾åœ¨åŒä¸€å€‹ LRU list ä¸­ã€‚é€™å€‹åšæ³•åœ¨éƒ¨åˆ†æƒ…æ³ä¸‹æœƒå°è‡´éæœ€ä½³åŒ–çš„ page replacement ç™¼ç”Ÿï¼Œç‰¹åˆ¥æ˜¯ç•¶ user space çš„ç¨‹å¼å’Œ kernel space çˆ­æ¶è¨˜æ†¶é«”æ™‚æœƒå½±éŸ¿åˆ°æ€§èƒ½ã€‚</p><h2 id=2627-ä¹‹å‰-page-replacement-å•é¡Œ>2.6.27 ä¹‹å‰ page replacement å•é¡Œ</h2><p>åœ¨ 2.6.27 æ›´æ—©ç‰ˆæœ¬çš„ page replacement å­˜åœ¨å…©å¤§ä¸»è¦å•é¡Œï¼Œé€™äº›å•é¡Œåœ¨å¤§å‹è¨˜æ†¶é«”ç³»çµ±ï¼Œå¦‚æ•¸ 10 GB ç”šè‡³æ–¼ä¸Š 100 GB çš„ç³»çµ±ä¸­å°¤å…¶åš´é‡ã€‚</p><ul><li>kernel é©…é€çš„ page ä¸¦éæœ€ä½³çš„ page ç”šè‡³æ–¼ä¸è©²é©…é€çš„ pageï¼Œå°è‡´æ€§èƒ½ä¸‹é™<ul><li>kernel åœ¨å›æ”¶è¨˜æ†¶é«”æ™‚ï¼Œå¯èƒ½æœƒé©…é€é‚£äº›ä¸è©²å›æ”¶çš„ pageï¼Œè€Œä¿ç•™æ‡‰è©²è¢«é©…é€çš„ page</li><li>é€™æœƒå°è‡´ cache thrashing çš„å•é¡Œï¼Œå› ç‚ºæ‡‰ç”¨ç¨‹å¼å¯èƒ½æœƒé »ç¹é‡æ–°è¼‰å…¥è¢«éŒ¯èª¤å›æ”¶çš„ page</li></ul></li><li>çœŸæ­£è¦è¢«å›æ”¶çš„ page cache å¯èƒ½æœƒè¢«éš±è—åœ¨å¤§é‡ [[anon memory]] æˆ–æ˜¯ anon page å¾Œé¢<ul><li>Linux ä½¿ç”¨ LRU list ç®¡ç†è¨˜æ†¶é«”ï¼Œä½† list æ²’æœ‰å€åˆ† anon page ä»¥åŠ page cache ( ç”¨æ–¼ç¡¬ç¢Ÿ I/O çš„ page )</li><li>åœ¨æ²’æœ‰ Split LRU ä¹‹å‰ï¼Œé€™äº› page è¢«çµ±ä¸€æ”¾åœ¨ LRU list ä¸­ï¼Œå°è‡´ kernel åœ¨å°‹æ‰¾å¯é‡‹æ”¾çš„ pageï¼Œå¯èƒ½æœƒå„ªå…ˆå›æ”¶æœ€å®¹æ˜“æ‰¾åˆ°çš„ pageï¼Œè€Œéæœ€æ‡‰è©²è¢«å›æ”¶çš„ page</li></ul></li><li>kernel æœƒæƒæåˆ°ä¸æ‡‰è©²è¢«å›æ”¶çš„ pageï¼Œå°è‡´ CPU è² è¼‰éé«˜<ul><li>åœ¨å¤§å‹è¨˜æ†¶ç³»ç³»çµ±ä¸­ï¼Œä½æ•ˆçš„ LRU æƒæåªæœƒå¢åŠ  CPU ä½¿ç”¨ç‡</li><li>ä½†åœ¨è¶…å¤§å‹è¨˜æ†¶é«”ç³»çµ±ä¸­ï¼Œé€™ç¨®æƒæä¸ä½†æœƒå°è‡´ CPU è² è¼‰å·¨å¹…å¢åŠ ï¼Œç”šè‡³å‡ºç¾åš´é‡çš„é–ç«¶çˆ­å•é¡Œï¼Œå½±éŸ¿ç³»çµ±æ•ˆèƒ½</li><li>kernel ä¸æ–·é‡è¤‡æƒæ LRU listï¼Œå…¶ä¸­è¨±å¤šçš„ page æ ¹æœ¬ä¸æ‡‰è©²å›æ”¶</li><li>ä¸åƒ…æµªè²» CPU è³‡æºï¼Œé‚„å¯èƒ½å°è‡´è¨˜æ†¶é«”ç®¡ç†çš„ lock ç«¶çˆ­ï¼Œæ‹–å®ç³»çµ±</li></ul></li></ul><p>ä¾‹å¦‚åœ¨ä¸€å€‹æœ‰ 80GB anon page å’Œ 10GB page cacheï¼Œæ²’æœ‰ swap çš„ç³»çµ±ä¸­ï¼Œåœ¨èˆŠçš„ LRU è¨­è¨ˆä¸­</p><ul><li>kernel æœƒè©¦åœ–å»é‡‹æ”¾ page cache (å› ç‚ºé€™ä¸€äº› page æ¯”è¼ƒå®¹æ˜“é‡æ–°è¼‰å…¥)</li><li>ä½†æ˜¯ç”±æ–¼ page cache è¢« 80GB çš„ anon page æ“‹ä½äº†ï¼Œå› æ­¤ kernel éœ€è¦ä¸æ–·æƒæ 80GB çš„ anon pageï¼Œè©¦åœ–æ‰¾åˆ°å¯é‡‹æ”¾çš„ pageï¼Œçµæœå°±æ˜¯ kernel åšå¾ˆå¤šç„¡æ•ˆæƒæ</li></ul><p>åœ¨å¾ŒçºŒä½¿ç”¨ Split LRU å˜—è©¦è§£æ±ºä¸Šé¢å•é¡Œï¼Œå°‡ LRU åˆ†æˆå…©é¡</p><ul><li>File-backed pages: ä¾†è‡ª disk çš„ pageï¼Œå¦‚ <code>.txt, .so, .bin</code> ç­‰ç­‰</li><li>Anon pages: æ‡‰ç”¨ç¨‹å¼çš„ç§æœ‰è¨˜æ†¶é«”ï¼Œå¦‚ Heap, Stack</li></ul><p>ç•¶è¨˜æ†¶é«”å£“åŠ›å¤§æ™‚ï¼Œkernel å¯ä»¥å„ªå…ˆå›æ”¶ File-backed pagesï¼Œä¸éœ€è¦æƒæå¤§é‡çš„ Anon pagesã€‚</p><h2 id=high-level-overview>High-Level Overview</h2><p>Linux Kernel çš„ VM ç®¡ç†éœ€è¦æœ€å°åŒ–æƒææˆæœ¬ï¼Œç¢ºä¿ page replacement åœ¨ best å’Œ worst éƒ½å¯ä»¥é«˜æ•ˆç‡åŸ·è¡Œã€‚Split LRU çš„è¨­è¨ˆæ­£å¼å¸Œæœ›èƒ½å¤ è§£æ±ºé€™ä¸€äº›å•é¡Œã€‚</p><p>TODO: page evict vs page reclaim vs page free vs page replacement</p><h3 id=æ ¸å¿ƒè¨­è¨ˆæ¦‚å¿µ>æ ¸å¿ƒè¨­è¨ˆæ¦‚å¿µ</h3><ul><li>æœ€å°åŒ–æƒæï¼Œé¿å…ç„¡æ•ˆçš„ page replacement<ul><li>æƒææˆæœ¬éš¨è‘—è¨˜æ†¶é«”å¢é•·è€Œå¢é•·ï¼Œåœ¨é¢è‡¨è¨˜æ†¶é«”å£“åŠ›ä¸‹ï¼Œkernel æ‡‰è©²åªæƒæå¯èƒ½éœ€è¦é‡‹æ”¾çš„ pageï¼Œè€Œä¸æ˜¯æ•´å€‹ LRU list</li></ul></li><li>å¤§å¤šæ•¸çš„ [[Page Churn]] ä¾†è‡ªæ–¼è®€å–å¤§å‹æª”æ¡ˆã€‚åœ¨å¤§å¤šæ•¸ server çš„ workload ä¸‹ï¼Œæœ€ä¸»è¦è¨˜æ†¶é«”å ç”¨ä¾†è‡ªæ–¼è®€å–å¤§é‡æª”æ¡ˆï¼Œä¾‹å¦‚ Database Systems, Log Processing, High-Frequency Trading, ML/AI Training<ul><li>è§£æ±ºæ–¹æ¡ˆç‚ºå„ªå…ˆé©…é€é€™ä¸€äº› file-backed pagesï¼Œå› ç‚ºä»–å€‘å¯ä»¥å¾ç¡¬ç¢Ÿé‡æ–°è¼‰å…¥ï¼Œä»£åƒ¹è¼ƒä½ï¼Œé¿å…æƒæ anon pagesï¼Œé€™ä¸€äº›å±¬æ–¼æ‡‰ç”¨ç¨‹å¼çš„ç§æœ‰è¨˜æ†¶é«”ï¼Œå¦‚ stack, heap è³‡æ–™ä¸èƒ½éš¨æ„ä¸Ÿæ£„</li></ul></li><li>ç•¶è¨˜æ†¶é«”ä¸è¶³æ™‚ï¼Œæ‰é©…é€å…¶ä»– page<ul><li>ç•¶è¨˜æ†¶é«”å……è¶³æ™‚ï¼Œåƒ…é©…é€ file-backed pagesã€‚å¦‚æœé©…é€ anon pagesï¼Œå¯èƒ½æœƒæœ‰ swapï¼Œswap å°æ•ˆèƒ½å½±éŸ¿å¤§</li></ul></li><li>å„ªå…ˆè€ƒæ…® FileSystem I/Oï¼Œè€Œé Swap I/O<ul><li>Swap æœƒæœ‰é¡å¤–çš„ç¡¬ç¢Ÿå¯«å…¥ï¼Œå½±éŸ¿æ€§èƒ½</li></ul></li><li>ä½¿ç”¨ Reference Count å’Œ Refault Data å¹³è¡¡æª”æ¡ˆå¿«å–ä»¥åŠ anon page<ul><li>Reference Count: è¨˜éŒ„ä¸€å€‹ page æœ€è¿‘è¢« access çš„é »ç‡</li><li>Refault Data: å¦‚æœä¸€å€‹ page åœ¨è¢«é©…é€ä¹‹å¾Œåˆå¾ˆå¿«è¢«è¼‰å…¥ï¼Œä»£è¡¨ä»–æ‡‰è©²è¢«ä¿ç•™</li><li>æ ¹æ“šé€™äº›è³‡æ–™å‹•æ…‹èª¿æ•´ LRUï¼Œç¢ºä¿ç³»çµ±å¹³è¡¡<ul><li>å¦‚æœæª”æ¡ˆå¿«å– Refault Data æ¬¡æ•¸å¤šï¼Œä»£è¡¨è¦ä¿ç•™æ›´å¤šæª”æ¡ˆå¿«å–</li><li>å¦‚æœ anon page Refault Data æ¬¡æ•¸å¤šï¼Œä»£è¡¨è¦æ¸›å°‘æª”æ¡ˆå¿«å–ï¼Œä¿ç•™æ›´å¤šæ‡‰ç”¨ç¨‹å¼è¨˜æ†¶é«”</li></ul></li></ul></li><li>é—œæ–¼ Best Case å’Œ Worst Case çš„æœ€ä½³åŒ–<ul><li>æ­£å¸¸æƒ…æ³: å„ªå…ˆé©…é€ file-backed pagesï¼Œæ¸›å°‘æ²’å¿…è¦çš„ page replacement</li><li>å³ä¾¿ç™¼ç”Ÿæœ€å£æƒ…æ³ï¼Œä¹Ÿä¸æœƒç™¼ç”Ÿå› ç‚ºéåº¦æƒæè€Œç™¼ç”Ÿ Lock Contention</li></ul></li></ul><h2 id=file-cache>File Cache</h2><p>File Cache ä¸»è¦è² è²¬å„²å­˜ä¾†è‡ªæ–¼ç¡¬ç¢Ÿï¼ŒNFS, CIFS çš„ data æˆ–æ˜¯ metadataï¼ŒLinux Kernel åœ¨è™•ç†é€™ä¸€äº› File Cache éœ€è¦è€ƒæ…®ä»¥ä¸‹å¹¾é»</p><ul><li>æª”æ¡ˆç³»çµ±å¤§å°é å¤§æ–¼è¨˜æ†¶é«”<ul><li>å°æ–¼ Server å‹•å‰‡ TB ä»¥ä¸Šï¼Œè¨˜æ†¶é«”æ¯”èµ·ç¡¬ç¢Ÿå°çš„è¨±å¤šã€‚Kernel éœ€è¦å‹•æ…‹ç®¡ç† File Cacheï¼Œç¢ºä¿æœ€å¸¸ç”¨çš„ File Cache å„²å­˜åœ¨è¨˜æ†¶é«”ä¸­ï¼Œè€Œä¸æ˜¯æµªè²»è¨˜æ†¶é«”å„²å­˜äº†ä¸€å † Cold data</li></ul></li><li>æª”æ¡ˆå­˜å–ç‰¹æ€§<ul><li>å¤§å¤šæ•¸æª”æ¡ˆè¢«å­˜å–çš„æ©Ÿç‡å¾ˆä½: é€™ä¸€äº›è³‡æ–™é€šå¸¸æ˜¯ä¸€æ¬¡æ€§è®€å–ï¼Œå¦‚å½±ç‰‡ä¸²æµï¼Œå‚™ä»½èˆ‡æ¢å¾©ï¼Œå¤§è¦æ¨¡è³‡æ–™è™•ç†ï¼Œé€™äº›è³‡æ–™è®€å–å®Œå¾Œä¸æœƒé‡è¤‡å­˜å–</li><li>å°‘é‡è³‡æ–™æœƒè¢«é »ç¹å­˜å–: ä¾‹å¦‚ database index, æ‡‰ç”¨ç¨‹å¼ config, log ç­‰ç­‰ï¼Œå› æ­¤é€™ä¸€äº›æ‡‰è©²å„ªå…ˆä¿ç•™åœ¨è¨˜æ†¶é«”ä¸­ï¼Œé¿å… Page Fault ç™¼ç”Ÿ</li></ul></li><li>ä½¿ç”¨ Used-Once çš„ page replacement<ul><li>å°æ–¼ Used-once page replacement algorithm çš„å¯¦ç¾ï¼ŒLinux Kernel ä½¿ç”¨å…©æ¢ LRU list ä¾†å°é€™ä¸€äº› File Cache é€²è¡Œç®¡ç†<ul><li>Inactive File List: æ–°è¼‰å…¥çš„ File Cache æœƒæ”¾å…¥ Inactive File Listï¼Œå¦‚æœåªè¢«å­˜å–ä¸€æ¬¡ï¼Œç•¶å®ƒåˆ°é” List tail çš„æ™‚å€™å›æ”¶</li><li>Active File List: ç•¶ä¸€å€‹ page è¢«å¤šæ¬¡å­˜å–æ™‚ï¼Œæœƒå¾ Inactive List é·ç§»åˆ° Active Listï¼Œç¢ºä¿å¸¸ç”¨çš„ page ä¸æœƒéæ—©è¢«é©…é€</li></ul></li></ul></li><li>é—œæ–¼ç®¡ç† Active List èˆ‡ Inactive List<ul><li>å¦‚æœ Inactive List è®Šå¤ªå°ï¼Œå‰‡å°‡ Active List ä¸­ç§»å‹•ä¸€äº›åˆ° Inactive List: ç•¶æ–°çš„ File Cache è¼‰å…¥æ™‚ï¼Œç¢ºä¿ä»–å€‘é‚„æœ‰æ©Ÿæœƒé€²å…¥åˆ° Active List</li><li>å¦‚æœ Active List å¤§æ–¼ Inactive List / 2 çš„å¤§å°ï¼Œå‰‡æœƒå°‡ Active List éƒ¨ä»½å…ƒç´ é–‹å§‹é™ç´šï¼Œé¿å… hot è³‡æ–™ç„¡é™åˆ¶çš„ä½”æ“šè¨˜æ†¶é«”</li></ul></li><li>å¦‚ä½•ç¢ºä¿ hot è³‡æ–™ä¸æœƒè¢«é©…é€<ul><li>åªè¦ Active List ä½”æ“šçš„è¨˜æ†¶é«”å¤§å°ä¸è¦è¶…é File Cache ç¸½å®¹é‡çš„ä¸€åŠï¼Œé‚£éº¼é€™ä¸€äº›é »ç¹å­˜å–çš„ hot è³‡æ–™å°‡ä¸æœƒè¢« kernel çš„ page replacement é€å‡ºè¨˜æ†¶é«”</li></ul></li><li>é—œæ–¼ Active List å¤§å°å„ªåŒ–<ul><li>å¯èƒ½å¯ä»¥è€ƒæ…® Recently Evicted Pages å› ç´ ä¾†èª¿æ•´ Active List çš„å¤§å°</li></ul></li></ul><h2 id=anonymous-memory>Anonymous Memory</h2><p>ç‚º Process çš„ç§æœ‰è¨˜æ†¶é«”ç©ºé–“ï¼ŒShared Memory Segments ä»¥åŠ tmpfsï¼Œé€™ä¸€äº›è¨˜æ†¶é«”å€æ®µèˆ‡ File Cache ä¸åŒï¼Œä»–å€‘ä¸ç›´æ¥å°æ‡‰åˆ°ç¡¬ç¢Ÿä¸Šçš„æª”æ¡ˆï¼Œè€Œæ˜¯åƒ…å­˜åœ¨æ–¼ RAM æˆ–æ˜¯ swap ç©ºé–“</p><ul><li>ç›¸è¼ƒæ–¼ File Cacheï¼Œæ•¸é‡è¼ƒå°‘: anon memory é€šå¸¸å’Œç³»çµ±ç¸½è¨˜æ†¶é«”å¤§å°ç›¸è¿‘ï¼Œä¸åƒ File Cache å­˜åœ¨å¯èƒ½å¤§æ–¼ RAM å®¹é‡çš„æƒ…æ³</li><li>ç”±æ–¼ anon memory ä¸»è¦å­˜æ”¾ç¨‹å¼çš„ stack, heap ç­‰ç­‰ï¼Œæœƒæ¯” File Cache æ›´åŠ é »ç¹çš„è¢«å­˜å–</li><li>é€šå¸¸ä¸æœƒè¢« swap outï¼Œé™¤éè¨˜æ†¶é«”åš´é‡ä¸è¶³ã€‚å¦‚æœ kernel é »ç¹æƒæ anon memoryï¼Œæœƒå°è‡´æ•ˆèƒ½æå¤±ä»¥åŠè¨˜æ†¶é«”ç®¡ç†æ•ˆç‡ä¸‹é™</li></ul><p>é—œæ–¼ Anon Memory çš„ç®¡ç†å…¶ä¸­ä¸€å€‹æ–¹æ³•ç‚º SEQ replacement (Sequential Replacement)</p><ul><li>æ‰€æœ‰ anon page ä¸€é–‹å§‹éƒ½æ˜¯è¢«å¼•ç”¨çš„</li><li>ç„¡è«– page æ˜¯å¦è¢«å¼•ç”¨ï¼Œéƒ½æœƒå®šå¾ Active List ç§»å‹•åˆ° Inactive</li><li>åœ¨ Inactive çš„ page è¢«å­˜å–æœƒèºé·åˆ° Active</li><li>å¦‚æœåœ¨ Inactive tail çš„ page é‚„æ˜¯æ²’æœ‰è¢«å­˜å–ï¼Œå‰‡æœƒè¢« swap out</li></ul><h2 id=non-reclaimable>Non reclaimable</h2><ul><li>è¢« <code>mlock()</code> é–å®šçš„ page</li><li>ä½¿ç”¨ <code>shmget()</code> åˆ†é…çš„å…±äº«è¨˜æ†¶é«”ï¼Œå¦‚æœåŠ ä¸Š <code>mlock()</code>ï¼Œå‰‡ä¸æœƒè¢«å›æ”¶</li><li><code>ramfs, ramdisk</code> ä¸æœƒè¢«æ›åˆ° swapï¼Œä¹Ÿä¸æœƒå—åˆ° LRU å›æ”¶æ©Ÿåˆ¶å½±éŸ¿ï¼Œæ¨™è¨˜æˆ Non reclaimable</li></ul><h3 id=recently-evicted-nonresident>Recently Evicted/ Nonresident</h3><p>è¼”åŠ© page fault ç™¼ç”Ÿæ™‚çš„ç½®æ›ç­–ç•¥ï¼Œä»¥åŠèª¿æ•´ LRU List å¤§å°ã€‚å¸Œæœ›æä¾›é¡å¤–è¨Šæ¯ï¼Œå¹«åŠ© VM æ›´åŠ å¥½çš„é€²è¡Œ page replacementã€‚ä¸æœƒå„²å­˜çœŸæ­£å›æ”¶çš„ pageï¼Œè€Œæ˜¯ç´€éŒ„å“ªä¸€äº› page æœ€è¿‘è¢«å›æ”¶éã€‚ç•¶ç™¼ç”Ÿ page fault æ™‚ï¼ŒçŸ¥é“è©² page æ˜¯å¦æœ€è¿‘è¢«å›æ”¶éï¼Œé€²è€Œæ±ºå®šæ˜¯å¦å„ªå…ˆåˆ†é…å›ä¾†ï¼Œé€™å€‹è³‡è¨Šå¯ä»¥é¿å… Thrashing æƒ…æ³çš„ç™¼ç”Ÿã€‚</p><p>èª¿æ•´ LRU List å¤§å°ï¼Œä¾‹å¦‚ç•¶æœ€è¿‘å›æ”¶ page æ¯”è¼ƒå¤šæ™‚ï¼Œå¯ä»¥å°‡ Active List å¢å¤§ï¼Œæ¸›å°‘é »ç¹çš„ swap outã€‚</p><p>å› ç‚ºæˆ‘å€‘å„²å­˜çš„æ˜¯ meta dataï¼Œè€ƒæ…®ä½¿ç”¨ radix tree å¯¦åš</p></section><footer class=article-footer><section class=article-tags><a href=/tags/linux-kernel/>Linux Kernel</a>
<a href=/tags/linux-kernel-mm/>Linux Kernel MM</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸é—œæ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/linux_numa_system/><div class=article-details><h2 class=article-title>Linux_NUMA_System</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2020 -
2025 WuTa Blog</section><section class=powerby>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> å»ºç«‹<br>ä¸»é¡Œ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è¨­è¨ˆ</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>